## This file contains the most common config options that a user on an E3SM
## supported machine might want to customize.  The values are mostly the same
## as in mpas_analysis/default.cfg, the default config file, which has nearly
## all of the available config options.
## Usage:
##  1. Copy this file to a new name for a specific run (say myrun.cfg).
##
##  2. Modify any config options you want to change in your new config file.
##     At a minimum, you need to specify:
##       * [runs]/mainRunName -- A name for the run to be included plot titles
##                               and legends
##       * [input]/baseDirectory -- The directory for the simulation results
##                                  to analyze
##       * [input]/mpasMeshName -- The name of the MPAS ocean/sea ice mesh
##       * [output]/baseDirectory -- The directory for the analysis results
##
##  3. run:
##
##        $ mpas_analysis myrun.cfg
##
##     This will read the configuration first from mpas_analysis/default.cfg
##     and then replace that configuration with any changes from from myrun.cfg
##
##  4. If you want to run a subset of the analysis, you can either set
##     [output]/generate in your config file or use the --generate flag on the
##     command line.  See the comments for [output]/generate below for more
##     details on this option.


[runs]
## options related to the run to be analyzed and control runs to be
## compared against

# mainRunName is a name that identifies the simulation being analyzed.
mainRunName = QU480_t_02

# config file for a control run to which this run will be compared.  The
# analysis should have already been run to completion once with this config
# file, so that the relevant MPAS climatologies already exist and have been
# remapped to the comparison grid.  Leave this option commented out if no
# control run is desired.
# controlRunConfigFile = /path/to/config/file

# config file for a main run on which the analysis was already run to
# completion.  The relevant MPAS climatologies already exist and have been
# remapped to the comparison grid and time series have been extracted.
# Leave this option commented out if the analysis for the main run should be
# performed.
# mainRunConfigFile = /path/to/config/file

[execute]
## options related to executing parallel tasks

# the number of MPI tasks to use in creating mapping files (1 means tasks run in
# serial, the default)
mapMpiTasks = 1

# "None" if ESMF should perform mapping file generation in serial without a
# command, or one of "srun" or "mpirun" if it should be run in parallel (or in
# serial but with a command)
mapParallelExec = None

[input]
## options related to reading in the results to be analyzed

# directory containing model results
baseDirectory = /lcrc/group/e3sm/ac.xylar/acme_scratch/anvil/20200305.A_WCYCL1850.ne4_oQU480.anvil

# Note: an absolute path can be supplied for any of these subdirectories.
# A relative path is assumed to be relative to baseDirectory.
# In this example, results are assumed to be in <baseDirecory>/run

# subdirectory containing restart files
runSubdirectory = run
# subdirectory for ocean history files
oceanHistorySubdirectory = archive/ocn/hist
# subdirectory for sea ice history files
seaIceHistorySubdirectory = archive/ice/hist

# names of namelist and streams files, either a path relative to baseDirectory
# or an absolute path.
oceanNamelistFileName = run/mpaso_in
oceanStreamsFileName = run/streams.ocean
seaIceNamelistFileName = run/mpassi_in
seaIceStreamsFileName = run/streams.seaice

# name of the ocean and sea-ice mesh (e.g. EC30to60E2r2, WC14to60E2r3,
# ECwISC30to60E2r1, SOwISC12to60E2r4, oQU240, etc.)
mpasMeshName = oQU480

[output]
## options related to writing out plots, intermediate cached data sets, logs,
## etc.

# The subdirectory for the analysis and output on the web portal
subdir = ${runs:mainRunName}/clim_${climatology:startYear}-${climatology:endYear}_ts_${timeSeries:startYear}-${timeSeries:endYear}

# directory where analysis should be written
# NOTE: This directory path must be specific to each test case.
baseDirectory = /lcrc/group/e3sm/ac.vankova/analysis/${output:subdir}

# provide an absolute path to put HTML in an alternative location (e.g. a web
# portal)
htmlSubdirectory = ${web_portal:base_path}/ac.vankova/analysis/${output:subdir}

# a list of analyses to generate.  Valid names can be seen by running:
#   mpas_analysis --list
# This command also lists tags for each analysis.
# Shortcuts exist to generate (or not generate) several types of analysis.
# These include:
#   'all' -- all analyses will be run
#   'all_publicObs' -- all analyses for which observations are available on the
#                      public server (the default)
#   'all_<tag>' -- all analysis with a particular tag will be run
#   'all_<component>' -- all analyses from a given component (either 'ocean'
#                        or 'seaIce') will be run
#   'only_<component>', 'only_<tag>' -- all analysis from this component or
#                                       with this tag will be run, and all
#                                       analysis for other components or
#                                       without the tag will be skipped
#   'no_<task_name>' -- skip the given task
#   'no_<component>', 'no_<tag>' -- in analogy to 'all_*', skip all analysis
#                                   tasks from the given component or with
#                                   the given tag.  Do
#                                      mpas_analysis --list
#                                   to list all task names and their tags
# an equivalent syntax can be used on the command line to override this
# option:
#    mpas_analysis analysis.cfg --generate \
#         only_ocean,no_timeSeries,timeSeriesSST
generate = ['climatologyMapAntarcticMelt','climatologyMapBSF','climatologyMapSose','climatologyMapSchmidtko','regionalTSDiagrams']

[climatologyMapBSF]
comparisonGrids = ['fris']
seasons =  ['ANN']
depthRanges = [(0.0, -10000.0)]

# the type of norm used in the colormap
normTypeResult = linear
# A dictionary with keywords for the norm
normArgsResult = {'vmin': -5, 'vmax': 5}
colorbarTicksResult = numpy.linspace(-5., 5., 11)
# Adding contour lines to the figure
contourLevelsResult = [-5.,-2.,-1., 1., 2., 5.]

# the type of norm used in the colormap
normTypeDifference = linear
# A dictionary with keywords for the norm
normArgsDifference = {'vmin': -2, 'vmax': 2}
colorbarTicksDifference = [-2.,-1., 0., 1., 2.]

[climatologyMapSchmidtko]
comparisonGrids = ['fris']
seasons =  ['ANN']

[climatologyMapSchmidtkoTemperature]
## options related to plotting climatology maps of potential temperature at the
## seafloor and comparing them against data from Schmidtko et al. (2014)

# colormap for model/observations
colormapNameResult = haline
# whether the colormap is indexed or continuous
colormapTypeResult = continuous
# the type of norm used in the colormap
normTypeResult = linear
# A dictionary with keywords for the norm
normArgsResult = {'vmin': -2.2, 'vmax': 1.8}
# place the ticks automatically by default
colorbarTicksResult = np.around(numpy.linspace(-2.2, 1.8, 5), decimals=1)
# Adding contour lines to the figure
contourLevelsResult = [-1.9]
contourThicknessResult = 0.5
contourColorResult = black

[climatologyMapSose]
comparisonGrids = ['fris']
seasons =  ['ANN']
depths = ['top','bot']
fieldList = ['temperature', 'salinity', 'mixedLayerDepth']

[climatologyMapSoseTemperatureShallow]
# colormap for model/observations
colormapNameResult = haline
# whether the colormap is indexed or continuous
# colormapTypeResult = continuous
# whether the colormap is indexed or continuous
colormapTypeResult = indexed
# color indices into colormapName for filled contours
colormapIndicesResult = numpy.array(numpy.linspace(0, 255, 38), int)
# colormap levels/values for contour boundaries
colorbarLevelsResult = numpy.linspace(-2.2., 1.8., 37)
# colormap levels/values for ticks (defaults to same as levels)
# colorbarTicksResult = numpy.linspace(-12., 12., 9)
colorbarTicksResult = np.around(numpy.linspace(-2.2, 1.8, 5), decimals=1)


# the type of norm used in the colormap
normTypeResult = linear
# A dictionary with keywords for the norm
normArgsResult = {'vmin': -2.2, 'vmax': 1.8}
# place the ticks automatically by default
# colorbarTicksResult = np.around(numpy.linspace(-2.2, 1.8, 5), decimals=1)
# Adding contour lines to the figure
contourLevelsResult = [-1.9]
contourThicknessResult = 0.5
contourColorResult = black

[climatologyMapSoseTemperatureDeep]
# colormap for model/observations
colormapNameResult = haline
# whether the colormap is indexed or continuous
colormapTypeResult = continuous
# the type of norm used in the colormap
normTypeResult = linear
# A dictionary with keywords for the norm
normArgsResult = {'vmin': -2.2, 'vmax': 1.8}
# place the ticks automatically by default
colorbarTicksResult = np.around(numpy.linspace(-2.2, 1.8, 5), decimals=1)
# Adding contour lines to the figure
contourLevelsResult = [-1.9]
contourThicknessResult = 0.5
contourColorResult = black

[climatologyMapAntarcticMelt]
comparisonGrids = ['fris']
seasons =  ['ANN']

# colormap for model/observations
colormapNameResult = balance
# whether the colormap is indexed or continuous
colormapTypeResult = continuous
# the type of norm used in the colormap
normTypeResult = linear
# A dictionary with keywords for the norm
normArgsResult = {'vmin': -2., 'vmax': 2.}
# place the ticks automatically by default
colorbarTicksResult = numpy.linspace(-3., 3., 7)
#colorbarTicksResult = [-3., -2., -1., 0., 1., 2., 3.]

# colormap for differences
# the type of norm used in the colormap
normTypeDifference = linear
# A dictionary with keywords for the norm
normArgsDifference = {'vmin': -2., 'vmax': 2.}
# place the ticks automatically by default
colorbarTicksDifference = numpy.linspace(-3., 3., 7)
#colorbarTicksResult = [-3., -2., -1., 0., 1., 2., 3.]


[regionalTSDiagrams]
## options related to plotting T/S diagrams of ocean regions

# the names of region groups to plot, each with its own section below
regionGroups = ['Antarctic Regions']

[TSDiagramsForAntarcticRegions]
## options related to plotting T/S diagrams of Antarctic regions
# list of regions to plot or ['all'] for all regions in the masks file.
# See "regionNames" in the antarcticRegions masks file in
# regionMaskSubdirectory for details.
#regionNames = ['all']
regionNames = ['Weddell Sea Deep','Weddell Sea Shelf','Eastern Weddell Sea Deep']

# The minimum and maximum depth over which fields are plotted, default is
# to take these values from the geojson feature's zmin and zmax properties.
zmin = -1000
zmax = 0

[climatology]
## options related to producing climatologies, typically to compare against
## observations and previous runs

# the first year over which to average climatalogies
startYear = 3
# the last year over which to average climatalogies
endYear = 5

[timeSeries]
## options related to producing time series plots, often to compare against
## observations and previous runs

# start and end years for timeseries analysis. Use endYear = end to indicate
# that the full range of the data should be used.  If errorOnMissing = False,
# the start and end year will be clipped to the valid range.  Otherwise, out
# of bounds values will lead to an error.  In a "control" config file used in
# a "main vs. control" analysis run, the range of years must be valid and
# cannot include "end" because the original data may not be available.
startYear = 1
endYear = 5

[index]
## options related to producing nino index.

# start and end years for El Nino 3.4 analysis. Use endYear = end to indicate
# that the full range of the data should be used.  If errorOnMissing = False,
# the start and end year will be clipped to the valid range.  Otherwise, out
# of bounds values will lead to an error.  In a "control" config file used in
# a "main vs. control" analysis run, the range of years must be valid and
# cannot include "end" because the original data may not be available.
startYear = 1
endYear = 5
